{"version":3,"sources":["webpack:///./src/App.vue?8c7f","webpack:///./src/App.vue","webpack:///src/App.vue","webpack:///./src/libs/blokus.js","webpack:///src/components/Blokus.vue","webpack:///./src/components/Blokus.vue?70fb","webpack:///./src/components/Blokus.vue","webpack:///src/components/room.vue","webpack:///./src/components/room.vue?8fae","webpack:///./src/components/room.vue","webpack:///./src/router/index.js","webpack:///./src/main.js"],"names":["selectortype_template_index_0_src_App","render","_h","this","$createElement","_c","_self","attrs","id","staticRenderFns","src_App","__webpack_require__","normalizeComponent","name","ssrContext","Board","classCallCheck_default","boardMatrix","math","zeros","previewMatrix","tryX","tryY","tryPiece","step","startPoints","Point","maxPlayerNum","players","playerIds","userId","player","push","row","col","piece","matrix","translation","points","translate","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","next","done","point","value","x","y","set","err","return","firstFlag","console","log","flag","startPoint","indexOf","isIn","corFlag","sideFlag","blankFlag","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","get","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","initTry","length","Piece","pieceData","matrixData","multiply","pointsData","reduce","array","colArray","concat","scale","map","x0","y0","_math$multiply","_math$multiply2","slicedToArray_default","x1","y1","_this","rotation","pi","matrixSize","size","C","cos","toFixed","S","sin","_math$multiply3","_math$multiply4","_this2","forEach","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","isEq","blokus","Player","board","score","initPieces","addPlayer","_this3","pieces","pieceDatas","selectedPiece","selectedIndex","tryIndex","tryMove","move","splice","Blokus","data","colClass","curId","myId","text","rooms","room","client","mounted","initClient","getAvailableRooms","methods","lib","leaveRoom","leave","createRoom","join","create","addListeners","joinByLastId","roomId","that","onJoin","add","onStateChange","state","initBoard","initPlayers","onMessage","type","selectPiece","pieceIndex","test","rotate","mirror","sessionId","index","selectPieceMsg","send","testMsg","moveMsg","rotateMsg","mirrorMsg","components_Blokus","_vm","staticClass","_m","_v","_l","valueOf","key","class","on","mouseover","$event","click","_e","staticStyle","grid-area","_s","clients","maxClients","src_components_Blokus","Blokus_normalizeComponent","roomKey","onLeave","arguments","clent","components_room","src_components_room","room_normalizeComponent","Vue","use","Router","router","routes","path","component","config","productionTip","el","components","App","template"],"mappings":"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,EAAG,IACZ,EAAG,EAAG,EAAG,EAAG,IACZ,EAAG,EAAG,EAAG,EAAG,IACZ,EAAG,EAAG,EAAG,EAAG,MAGZ,EAAG,EAAG,EAAG,EAAG,IACZ,EAAG,EAAG,EAAG,EAAG,IACZ,EAAG,EAAG,EAAG,EAAG,IACZ,EAAG,EAAG,EAAG,EAAG,IACZ,EAAG,EAAG,EAAG,EAAG,MAGZ,EAAG,EAAG,EAAG,EAAG,IACZ,EAAG,EAAG,EAAG,EAAG,IACZ,EAAG,EAAG,EAAG,EAAG,IACZ,EAAG,EAAG,EAAG,EAAG,IACZ,EAAG,EAAG,EAAG,EAAG,MAGZ,EAAG,EAAG,EAAG,EAAG,IACZ,EAAG,EAAG,EAAG,EAAG,IACZ,EAAG,EAAG,EAAG,EAAG,IACZ,EAAG,EAAG,EAAG,EAAG,IACZ,EAAG,EAAG,EAAG,EAAG,MAGZ,EAAG,EAAG,EAAG,EAAG,IACZ,EAAG,EAAG,EAAG,EAAG,IACZ,EAAG,EAAG,EAAG,EAAG,IACZ,EAAG,EAAG,EAAG,EAAG,IACZ,EAAG,EAAG,EAAG,EAAG,MAGZ,EAAG,EAAG,EAAG,EAAG,IACZ,EAAG,EAAG,EAAG,EAAG,IACZ,EAAG,EAAG,EAAG,EAAG,IACZ,EAAG,EAAG,EAAG,EAAG,IACZ,EAAG,EAAG,EAAG,EAAG,MAGZ,EAAG,EAAG,EAAG,EAAG,IACZ,EAAG,EAAG,EAAG,EAAG,IACZ,EAAG,EAAG,EAAG,EAAG,IACZ,EAAG,EAAG,EAAG,EAAG,IACZ,EAAG,EAAG,EAAG,EAAG,MAGZ,EAAG,EAAG,EAAG,EAAG,IACZ,EAAG,EAAG,EAAG,EAAG,IACZ,EAAG,EAAG,EAAG,EAAG,IACZ,EAAG,EAAG,EAAG,EAAG,IACZ,EAAG,EAAG,EAAG,EAAG,MAGZ,EAAG,EAAG,EAAG,EAAG,IACZ,EAAG,EAAG,EAAG,EAAG,IACZ,EAAG,EAAG,EAAG,EAAG,IACZ,EAAG,EAAG,EAAG,EAAG,IACZ,EAAG,EAAG,EAAG,EAAG,MAGZ,EAAG,EAAG,EAAG,EAAG,IACZ,EAAG,EAAG,EAAG,EAAG,IACZ,EAAG,EAAG,EAAG,EAAG,IACZ,EAAG,EAAG,EAAG,EAAG,IACZ,EAAG,EAAG,EAAG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","file":"static/js/app.4fa3ae3d913718aec03c.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-d509781e\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-d509781e\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d509781e\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div id=\"app\">\r\n    <!--     <img src=\"./assets/logo.png\"> -->\r\n    <router-view />\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    name: 'App'\r\n}\r\n\r\n</script>\r\n<style>\r\n#app {\r\n    -webkit-font-smoothing: antialiased;\r\n    -moz-osx-font-smoothing: grayscale;\r\n    text-align: center;\r\n    color: #2c3e50;\r\n}\r\n* {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","/*\r\n * @Author: Baze\r\n * @Date:   2019-07-04 11:48:15\r\n * @Last Modified by:   Baze\r\n * @Last Modified time: 2019-07-30 17:58:36\r\n */\r\n\r\nimport math from 'mathjs/dist/math.js'\r\nclass Board {\r\n    constructor() {\r\n        this.boardMatrix = math.zeros(20, 20)\r\n        this.previewMatrix = math.zeros(20, 20)\r\n        this.tryX = 0\r\n        this.tryY = 0\r\n        this.tryPiece = null\r\n        this.step = 0\r\n        this.startPoints = [\r\n            new Point(0, 0),\r\n            new Point(0, 19),\r\n            new Point(19, 19),\r\n            new Point(19, 0)\r\n        ]\r\n        this.maxPlayerNum = 4\r\n        this.players = {}\r\n        this.playerIds = []\r\n    }\r\n    addPlayer(userId, player) {\r\n        //  todo 判断玩家个数\r\n        this.players[userId] = player\r\n        this.playerIds.push(userId)\r\n    }\r\n    initTry() {\r\n        this.tryX = 0\r\n        this.tryY = 0\r\n        this.tryPiece = null\r\n    }\r\n    tryMove(row, col, piece, userId) {\r\n        // console.log(row, col, piece, userId)\r\n        let matrix = math.zeros(20, 20)\r\n        let translation = new Point(row - 2, col - 2)\r\n        let points = piece.translate(translation)\r\n        for (let point of points) {\r\n            if (point.x <= 19 && point.x >= 0 && point.y <= 19 && point.y >= 0) {\r\n                matrix.set([point.y, point.x], userId)\r\n            } else {\r\n                return\r\n            }\r\n        }\r\n        this.tryX = row - 2\r\n        this.tryY = col - 2\r\n        this.tryPiece = piece\r\n        this.previewMatrix = matrix\r\n    }\r\n    move(userId, firstFlag) {\r\n        console.log('now player', userId)\r\n        if (this.tryPiece) {\r\n            let translation = new Point(this.tryX, this.tryY)\r\n            let points = this.tryPiece.translate(translation)\r\n\r\n            //  验证合法性\r\n            let flag = true\r\n            if (firstFlag) {\r\n                //  第一个必须从角落开始\r\n                let startPoint = this.startPoints[this.playerIds.indexOf(userId)]\r\n                console.log('first piece,start point:', startPoint)\r\n                flag = startPoint.isIn(points)\r\n            } else {\r\n                //  后续的必须和之前\r\n                //  角对角 不能边对边 不能和之前的重合\r\n                let corFlag = false // corner to corner\r\n                let sideFlag = true // side to side\r\n                let blankFlag = true // must in blank\r\n                for (let point of points) {\r\n                    // 九个判断\r\n                    // 空白\r\n                    if (this.boardMatrix.get([point.y, point.x]) !== 0) {\r\n                        blankFlag = false\r\n                        break\r\n                    }\r\n                    //  边不靠\r\n                    if (point.y + 1 <= 19 && this.boardMatrix.get([point.y + 1, point.x]) === userId) {\r\n                        sideFlag = false\r\n                        break\r\n                    }\r\n                    if (point.y - 1 >= 0 && this.boardMatrix.get([point.y - 1, point.x]) === userId) {\r\n                        sideFlag = false\r\n                        break\r\n                    }\r\n                    if (point.x + 1 <= 19 && this.boardMatrix.get([point.y, point.x + 1]) === userId) {\r\n                        sideFlag = false\r\n                        break\r\n                    }\r\n                    if (point.x - 1 >= 0 && this.boardMatrix.get([point.y, point.x - 1]) === userId) {\r\n                        sideFlag = false\r\n                        break\r\n                    }\r\n                    //  角对角\r\n                    if (point.y + 1 <= 19 &&\r\n                        point.x + 1 <= 19 &&\r\n                        this.boardMatrix.get([point.y + 1, point.x + 1]) === userId) {\r\n                        corFlag = true\r\n                    }\r\n                    if (point.y + 1 <= 19 &&\r\n                        point.x - 1 >= 0 &&\r\n                        this.boardMatrix.get([point.y + 1, point.x - 1]) === userId) {\r\n                        corFlag = true\r\n                    }\r\n                    if (point.y - 1 >= 0 &&\r\n                        point.x + 1 <= 19 &&\r\n                        this.boardMatrix.get([point.y - 1, point.x + 1]) === userId) {\r\n                        corFlag = true\r\n                    }\r\n                    if (point.y - 1 >= 0 &&\r\n                        point.x - 1 >= 0 &&\r\n                        this.boardMatrix.get([point.y - 1, point.x - 1]) === userId) {\r\n                        corFlag = true\r\n                    }\r\n                }\r\n                console.log(corFlag, sideFlag, blankFlag)\r\n                flag = corFlag && sideFlag && blankFlag\r\n            }\r\n            if (flag) {\r\n                for (let point of points) {\r\n                    this.boardMatrix.set([point.y, point.x], userId)\r\n                }\r\n                this.initTry()\r\n                this.step += 1\r\n                return points.length\r\n            } else {\r\n                return 0\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// 棋子\r\nclass Piece {\r\n    constructor(pieceData, userId) {\r\n        this.userId = userId\r\n        this.matrixData = math.multiply(math.matrix(pieceData), userId)\r\n        this.pieceData = pieceData\r\n        this.pointsData = pieceData.reduce(\r\n            (array, row, y) => {\r\n                let colArray = row.reduce((array, col, x) => {\r\n                    if (col === 1) {\r\n                        array.push(new Point(x, y))\r\n                    }\r\n                    return array\r\n                }, [])\r\n                return array.concat(colArray)\r\n            }, [])\r\n        this.translation = new Point(0, 0) //  平移量\r\n        this.scale = 1 //  缩放 暂时不用\r\n    }\r\n    translate(translation) {\r\n        return this.pointsData.map(point => {\r\n            let x0 = point.x\r\n            let y0 = point.y\r\n            let [\r\n                [x1],\r\n                [y1],\r\n                [z1] // eslint-disable-line no-unused-vars\r\n            ] = math.multiply(\r\n                [\r\n                    [1, 0, translation.x],\r\n                    [0, 1, translation.y],\r\n                    [0, 0, 1]\r\n                ], [\r\n                    [x0],\r\n                    [y0],\r\n                    [1]\r\n                ])\r\n            return new Point(x1, y1)\r\n        })\r\n    }\r\n    setTranslation(x, y) {\r\n        this.translation = new Point(x, y)\r\n    }\r\n    rotate() {\r\n        let rotation = math.pi / 2\r\n        let matrixSize = this.matrixData.size()\r\n        let matrix = math.zeros(matrixSize[0], matrixSize[1])\r\n        let C = math.cos(rotation).toFixed()\r\n        let S = math.sin(rotation).toFixed()\r\n        let points = this.pointsData.map(point => {\r\n            console.log(point)\r\n\r\n            //  然后旋转\r\n            let [\r\n                [x1],\r\n                [y1],\r\n                [z1] // eslint-disable-line no-unused-vars\r\n            ] = math.multiply([\r\n                [C, -S, (1 - C) * 2 + S * 2],\r\n                [S, C, (1 - C) * 2 - S * 2],\r\n                [0, 0, 1]\r\n            ], [\r\n                [point.x],\r\n                [point.y],\r\n                [1]\r\n            ])\r\n            matrix.set([y1, x1], this.userId)\r\n            return new Point(x1, y1)\r\n        })\r\n        this.pointsData = points\r\n        this.matrixData = matrix\r\n    }\r\n    mirror() {\r\n        let matrixSize = this.matrixData.size()\r\n        let matrix = math.zeros(matrixSize[0], matrixSize[1])\r\n        let points = []\r\n        this.pointsData.forEach(point => {\r\n            //  然后旋转\r\n            let x1 = matrixSize[0] - 1 - point.x\r\n            let y1 = point.y\r\n            matrix.set([y1, x1], this.userId)\r\n            points.push(new Point(x1, y1))\r\n        })\r\n        this.pointsData = points\r\n        this.matrixData = matrix\r\n    }\r\n}\r\n\r\nclass Point {\r\n    constructor(x, y) {\r\n        this.x = x\r\n        this.y = y\r\n    }\r\n    isIn(points) {\r\n        for (let point of points) {\r\n            if (this.isEq(point)) {\r\n                return true\r\n            }\r\n        }\r\n        return false\r\n    }\r\n    isEq(point) {\r\n        return this.x === point.x && this.y === point.y\r\n    }\r\n}\r\n\r\nclass Player {\r\n    constructor(userId, board) {\r\n        this.userId = userId\r\n        this.board = board\r\n        this.score = 0\r\n        this.initPieces(userId)\r\n        this.board.addPlayer(userId, this)\r\n    }\r\n    initPieces(userId) {\r\n        this.firstFlag = true // 是否落子\r\n        this.pieces = []\r\n        pieceDatas.forEach(pieceData => {\r\n            this.pieces.push(new Piece(pieceData, userId))\r\n        })\r\n    }\r\n    tryMove(row, col, selectedPiece, selectedIndex) {\r\n        this.tryIndex = selectedIndex\r\n        this.board.tryMove(row, col, selectedPiece, this.userId)\r\n    }\r\n    move() {\r\n        console.log('move userId', this.userId, this.tryIndex)\r\n        let score = this.board.move(this.userId, this.firstFlag)\r\n        console.log('player move flag', score)\r\n        if (score) {\r\n            this.firstFlag = false\r\n            this.pieces.splice(this.tryIndex, 1)\r\n\r\n            //  加分\r\n            this.score += score\r\n            if (this.pieces.length === 0 && score === 1) {\r\n                this.score += 20\r\n            } else if (this.pieces.length === 0) {\r\n                this.score += 15\r\n            }\r\n            return true\r\n        } else {\r\n            return false\r\n        }\r\n    }\r\n}\r\n\r\nexport default {\r\n    Board,\r\n    Player\r\n}\r\nconst pieceDatas = [\r\n    [\r\n        [0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 0],\r\n        [0, 0, 1, 0, 0],\r\n        [0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 0]\r\n    ],\r\n    [\r\n        [0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 0],\r\n        [0, 1, 1, 0, 0],\r\n        [0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 0]\r\n    ],\r\n    [\r\n        [0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 0],\r\n        [0, 1, 1, 1, 0],\r\n        [0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 0]\r\n    ],\r\n    [\r\n        [0, 0, 0, 0, 0],\r\n        [0, 0, 1, 0, 0],\r\n        [0, 0, 1, 1, 0],\r\n        [0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 0]\r\n    ],\r\n    [\r\n        [0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 0],\r\n        [1, 1, 1, 1, 0],\r\n        [0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 0]\r\n    ],\r\n    [\r\n        [0, 0, 0, 0, 0],\r\n        [0, 1, 0, 0, 0],\r\n        [0, 1, 1, 1, 0],\r\n        [0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 0]\r\n    ],\r\n    [\r\n        [0, 0, 0, 0, 0],\r\n        [0, 0, 1, 0, 0],\r\n        [0, 1, 1, 1, 0],\r\n        [0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 0]\r\n    ],\r\n    [\r\n        [0, 0, 0, 0, 0],\r\n        [0, 0, 1, 1, 0],\r\n        [0, 1, 1, 0, 0],\r\n        [0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 0]\r\n    ],\r\n    [\r\n        [0, 0, 0, 0, 0],\r\n        [0, 1, 1, 0, 0],\r\n        [0, 1, 1, 0, 0],\r\n        [0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 0]\r\n    ],\r\n    [\r\n        [0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 0],\r\n        [1, 1, 1, 1, 1],\r\n        [0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 0]\r\n    ],\r\n    [\r\n        [0, 0, 0, 0, 0],\r\n        [0, 1, 0, 0, 0],\r\n        [0, 1, 1, 1, 1],\r\n        [0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 0]\r\n    ],\r\n    [\r\n        [0, 0, 0, 0, 0],\r\n        [0, 0, 1, 0, 0],\r\n        [0, 1, 1, 1, 1],\r\n        [0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 0]\r\n    ],\r\n    [\r\n        [0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 0],\r\n        [0, 0, 1, 1, 1],\r\n        [0, 1, 1, 0, 0],\r\n        [0, 0, 0, 0, 0]\r\n    ],\r\n    [\r\n        [0, 0, 0, 0, 0],\r\n        [0, 1, 1, 0, 0],\r\n        [0, 1, 1, 1, 0],\r\n        [0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 0]\r\n    ],\r\n    [\r\n        [0, 0, 0, 0, 0],\r\n        [0, 1, 0, 1, 0],\r\n        [0, 1, 1, 1, 0],\r\n        [0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 0]\r\n    ],\r\n    [\r\n        [0, 0, 0, 0, 0],\r\n        [0, 0, 1, 0, 0],\r\n        [0, 1, 1, 1, 0],\r\n        [0, 1, 0, 0, 0],\r\n        [0, 0, 0, 0, 0]\r\n    ],\r\n    [\r\n        [0, 0, 0, 0, 0],\r\n        [0, 0, 1, 1, 0],\r\n        [0, 0, 1, 0, 0],\r\n        [0, 1, 1, 0, 0],\r\n        [0, 0, 0, 0, 0]\r\n    ],\r\n    [\r\n        [0, 0, 0, 0, 0],\r\n        [0, 1, 0, 0, 0],\r\n        [0, 1, 0, 0, 0],\r\n        [0, 1, 1, 1, 0],\r\n        [0, 0, 0, 0, 0]\r\n    ],\r\n    [\r\n        [0, 0, 0, 0, 0],\r\n        [0, 0, 1, 0, 0],\r\n        [0, 0, 1, 0, 0],\r\n        [0, 1, 1, 1, 0],\r\n        [0, 0, 0, 0, 0]\r\n    ],\r\n    [\r\n        [0, 0, 0, 0, 0],\r\n        [0, 0, 1, 0, 0],\r\n        [0, 1, 1, 1, 0],\r\n        [0, 0, 1, 0, 0],\r\n        [0, 0, 0, 0, 0]\r\n    ],\r\n    [\r\n        [0, 0, 0, 0, 0],\r\n        [0, 1, 0, 0, 0],\r\n        [0, 1, 1, 0, 0],\r\n        [0, 0, 1, 1, 0],\r\n        [0, 0, 0, 0, 0]\r\n    ]\r\n\r\n]\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/libs/blokus.js","<template>\r\n  <div class=\"blokus\">\r\n    <div class=\"square\">\r\n      <div class=\"info\">\r\n        <div class=\"cn\">\r\n          <p>游戏流程</p>\r\n          <p>1、四位玩家各选择一种颜色的棋子，按照逆时针顺序轮流下棋。顺序为蓝、黄、红、绿，分别从左上、左下、右下、右上开局。</p>\r\n          <p>2、每位玩家第一步下棋，都必须覆盖住棋盘角落的起始点。</p>\r\n          <p>3、之后每一步新摆放的棋子，它的一个角必须与原有的同颜色的棋子的一个角接上。注意只能角对角，不能有边与边的接触。和其他颜色的棋子则没有限制。</p>\r\n          <p>4、一旦某玩家无法将自己的棋子按照规则放在棋盘上，则当轮该玩家宣布弃权，由下一个玩家继续。</p>\r\n          <p>当所有玩家都无法下棋时，则该局游戏结束。</p>\r\n        </div>\r\n        <div class=\"en\">\r\n          <p>How to Play:</p>\r\n          <p>1. Each player chooses a color and places that set of 21 pieces in front of his/her side of the board. The order of play is as follows: blue, yellow, red, and then green.</p>\r\n          <p>2. The first player (blue) places any of his/her pieces in a corner square. Play proceeds clockwise around the board (yellow, red, and green), each player putting their first piece down in one of the corner squares.</p>\r\n          <p>3. Play continues as each player lays down one piece during a turn.\r\n            Each new piece must touch at least one other piece of the same color, but only at the corners.\r\n            No flat edges of same color pieces can touch.\r\n            There are no restrictions on how pieces of different colors can touch one another.</p>\r\n          <p>4. Whenever a player is unable to place one of his/her remaining pieces on the board, that player must pass his/her turn.</p>\r\n          <p>End of Game:\r\n            The game ends when all players are blocked from laying down any more of their pieces. This also includes any players who may have placed all of their pieces on the board. Scores are tallied, and the player with the highest score is the winner.</p>\r\n          <p>Scoring:\r\n            Each player counts the number of unit squares in his/her remaining pieces (1 unit square = -1 point).\r\n            A player earns +15 points if all his/her pieces have been placed on the board plus 5 additional bonus points if the last piece placed on the board was the smallest piece (one square).</p>\r\n        </div>\r\n      </div>\r\n      <div class=\"board\" style=\"\">\r\n        <template v-for=\"(row,y) in board.boardMatrix.valueOf()\">\r\n          <div v-for=\"(col,x) in row\" :key=\"y*20+x\" class=\"cel\" :class=\"colClass[col]\">\r\n            <!-- {{col}} -->\r\n          </div>\r\n          <div class=\"cel -hidden\" :key=\"y+'n'\">\\n</div>\r\n        </template>\r\n      </div>\r\n      <div class=\"board\" style=\"\" v-if=\"selectedPiece\">\r\n        <template v-for=\"(row,y) in board.previewMatrix.valueOf()\">\r\n          <div v-for=\"(col,x) in row\" :key=\"y*20+x\" class=\"cel\" :class=\"colClass[col]\" @mouseover=\"testMsg(selectedPiece.userId,x,y)\" @click=\"moveMsg(selectedPiece.userId)\">\r\n            <!-- {{col}} -->\r\n          </div>\r\n          <div class=\"cel -hidden\" :key=\"y+'n'\">\\n</div>\r\n        </template>\r\n      </div>\r\n      <div v-for=\"(player,index) in players\" class=\"player\" :class=\"'player'+index\" :key=\"index\">\r\n        <div v-for=\"(piece,index) in player.pieces\" class=\"piece\" :key=\"index\" @click=\"selectPieceMsg(player.userId,index)\">\r\n          <template v-for=\"(row,y) in piece.matrixData.valueOf()\">\r\n            <div v-for=\"(col,x) in row\" class=\"cel\" :class=\"colClass[col]\" :key=\"y*5+x\">\r\n              <!-- {{col}} -->\r\n            </div>\r\n            <div class=\"cel -hidden\" :key=\"y+'n'\">\\n</div>\r\n          </template>\r\n        </div>\r\n      </div>\r\n      <div class=\"choose\">\r\n        <div style=\"grid-area:cin\">\r\n          <p>当前选中 choosed</p>\r\n        </div>\r\n        <div v-if=\"selectedPiece\" class=\"piece\" style=\"grid-area:cp\">\r\n          <template v-for=\"(row,y) in selectedPiece.matrixData.valueOf()\">\r\n            <div v-for=\"(col,x) in row\" class=\"cel\" :class=\"colClass[col]\" :key=\"y*5+x\">\r\n              <!-- {{col}} -->\r\n            </div>\r\n            <div class=\"cel -hidden\" :key=\"y+'n'\">\\n</div>\r\n          </template>\r\n        </div>\r\n        <button @click=\"rotateMsg(selectedPiece.userId)\" style=\"grid-area:btn1\">旋转 rotate</button>\r\n        <button @click=\"mirrorMsg(selectedPiece.userId)\" style=\"grid-area:btn2\">翻转 mirror</button>\r\n      </div>\r\n      <div class=\"scoreboard\">\r\n        <p>记分板 scoreboard</p>\r\n        <p v-for=\"(player,index) in players\" class=\"player\" :key=\"index\" :class=\"colClass[index]\">\r\n          {{\"player\"+player.userId +\": \" + player.score}}\r\n        </p>\r\n        <p v-if=\"text\">提示:{{text}}</p>\r\n      </div>\r\n      <div class=\"room\">\r\n        <template v-if=\"room\">\r\n          <p>当前房间号: {{room.id}}</p>\r\n          <!-- <p>房间情况: {{room.clients}}/{{room.maxClients}}</p> -->\r\n          <button @click=\"leaveRoom\">退出房间</button>\r\n        </template>\r\n        <template v-else>\r\n          <button @click=\"getAvailableRooms\">刷新房间列表</button>\r\n          <button @click=\"createRoom\">创建房间</button>\r\n          <ul>\r\n            <li v-for=\"(room,index) in rooms\" :key=\"index\">\r\n              {{room.roomId+' '+room.clients+'/'+room.maxClients}}\r\n              <button @click=\"joinByLastId(room.roomId)\">加入</button>\r\n            </li>\r\n          </ul>\r\n        </template>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport blokus from '@/libs/blokus'\r\nimport * as Colyseus from 'colyseus.js'\r\nexport default {\r\n    name: 'Blokus',\r\n    data() {\r\n        return {\r\n            // board: math.zeros(20, 20)\r\n            board: new blokus.Board(),\r\n            players: {},\r\n            selectedPiece: null, // 当前选中棋子\r\n            colClass: ['', 'blue', 'yellow', 'red', 'green'],\r\n            curId: 1,\r\n            myId: 1,\r\n            text: '',\r\n            rooms: [],\r\n            room: null,\r\n            client: null\r\n        }\r\n    },\r\n    mounted() {\r\n        // this.players = {\r\n        //     1: new blokus.Player(1, this.board),\r\n        //     2: new blokus.Player(2, this.board),\r\n        //     3: new blokus.Player(3, this.board),\r\n        //     4: new blokus.Player(4, this.board)\r\n        // }\r\n        this.initClient()\r\n        this.getAvailableRooms()\r\n    },\r\n    methods: {\r\n        // room\r\n        initClient() {\r\n            this.client = new Colyseus.Client('ws://140.143.2.208:2567')\r\n            console.log('client', this.client)\r\n        },\r\n        leaveRoom() {\r\n            this.room.leave()\r\n            this.room = null\r\n            this.getAvailableRooms()\r\n        },\r\n        createRoom() {\r\n            this.room = this.client.join('blokus-room', { create: true })\r\n            this.addListeners(this.room)\r\n        },\r\n        getAvailableRooms() {\r\n            this.client.getAvailableRooms('blokus-room', (rooms, err) => {\r\n                console.log(\"rooms[0]\", rooms && rooms[0])\r\n                this.rooms = rooms\r\n            })\r\n        },\r\n        joinByLastId(roomId) {\r\n            this.room = this.client.join(roomId)\r\n            console.log(\"joinByLastId\", roomId, this.room, this.client)\r\n            this.addListeners(this.room)\r\n            // this.getAvailableRooms()\r\n        },\r\n        //  添加事件监听\r\n        addListeners() {\r\n            let that = this\r\n            this.room.onJoin.add(function() {\r\n                console.log(\"joined\");\r\n            });\r\n\r\n            this.room.onStateChange.add((state) => {\r\n                console.log(\"initial room state:\", state, state.players);\r\n                that.initBoard()\r\n                that.initPlayers(state.players)\r\n            });\r\n\r\n            // 监听消息\r\n            this.room.onMessage.add((data) => {\r\n                if (data.type === 'selectPiece') {\r\n                    that.selectPiece(data.userId, data.pieceIndex)\r\n                }\r\n                if (data.type === 'test') {\r\n                    that.test(data.userId,data.row, data.col)\r\n                }\r\n                if (data.type === 'move') {\r\n                    that.move(data.userId)\r\n                }\r\n                if (data.type === 'rotate') {\r\n                    that.rotate(data.userId)\r\n                }\r\n                if (data.type === 'mirror') {\r\n                    that.mirror(data.userId)\r\n                }\r\n            });\r\n        },\r\n        //初始化棋盘\r\n        initBoard() {\r\n            this.board = new blokus.Board()\r\n        },\r\n        //初始化玩家\r\n        initPlayers(players) {\r\n            console.log(players)\r\n            for (let sessionId in players) {\r\n                let player = players[sessionId]\r\n                let index = player.index\r\n                console.log(\"player\", player)\r\n                this.players[index] = new blokus.Player(index, this.board)\r\n                if(this.room.sessionId === sessionId){\r\n                    this.myId = index\r\n                    console.log(\"myId!!!\",this.myId)\r\n                }\r\n            }\r\n        },\r\n        //  发送选中消息\r\n        selectPieceMsg(userId, pieceIndex) {\r\n            if (userId !== this.curId) {\r\n                this.text = '没轮到你'\r\n                return\r\n            }\r\n            if (userId !== this.myId) {\r\n                this.text = '不是你的'\r\n                return\r\n            }\r\n            this.text = ''\r\n            this.room.send({\r\n                type: 'selectPiece',\r\n                userId,\r\n                pieceIndex\r\n            })\r\n        },\r\n        selectPiece(userId, pieceIndex) {\r\n            this.selectedPiece = this.players[userId].pieces[pieceIndex]\r\n            this.selectedIndex = pieceIndex\r\n            this.board.initTry()\r\n        },\r\n        testMsg(userId, row, col) {\r\n            if (userId === this.myId) {\r\n                this.room.send({\r\n                    type: 'test',\r\n                    userId,\r\n                    row,\r\n                    col\r\n                })\r\n            }\r\n        },\r\n        test(userId, row, col) {\r\n            console.log(userId,row, col, this.selectedPiece, this.selectedIndex)\r\n            this.players[userId].tryMove(row, col, this.selectedPiece, this.selectedIndex)\r\n        },\r\n        moveMsg(userId){\r\n            if (userId === this.myId) {\r\n                this.room.send({\r\n                    type: 'move',\r\n                    userId\r\n                })\r\n            }\r\n        },\r\n        move(userId) {\r\n            let flag = this.players[userId].move()\r\n            if (flag) {\r\n                this.selectedPiece = null\r\n                this.curId = this.board.playerIds[this.board.step % this.board.playerIds.length]\r\n            }\r\n        },\r\n        rotateMsg(userId){\r\n            if (userId === this.myId) {\r\n                this.room.send({\r\n                    type: 'rotate',\r\n                    userId\r\n                })\r\n            }\r\n        },\r\n        rotate() {\r\n            this.selectedPiece && this.selectedPiece.rotate()\r\n        },\r\n        mirrorMsg(userId){\r\n            if (userId === this.myId) {\r\n                this.room.send({\r\n                    type: 'mirror',\r\n                    userId\r\n                })\r\n            }\r\n        },\r\n        mirror() {\r\n            this.selectedPiece && this.selectedPiece.mirror()\r\n        }\r\n    }\r\n}\r\n\r\n</script>\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\nbody {\r\n    height: 100vh;\r\n    display: grid;\r\n    /*place-content:center;*/\r\n    /*background-color: #222222;*/\r\n}\r\n\r\np {\r\n    margin-top: 1vmin;\r\n}\r\n\r\n.square {\r\n    background-color: white;\r\n    display: grid;\r\n    grid-template-columns: 22vmin 52vmin 22vmin;\r\n    grid-template-rows: 22vmin 52vmin 22vmin;\r\n    grid-gap: 1vmin;\r\n    grid-template-areas:\r\n        \"g1 g2  g3\"\r\n        \"g4 g5  g6\"\r\n        \"g7 g8  g9\"\r\n}\r\n\r\n.room {\r\n    grid-area: g1;\r\n}\r\n\r\n.info {\r\n    grid-area: g7;\r\n    text-align: left;\r\n    height: 100%;\r\n    overflow: auto;\r\n}\r\n\r\n.board {\r\n    grid-area: g5;\r\n    display: grid;\r\n    grid-template-columns: repeat(20, 1fr);\r\n    grid-template-rows: repeat(20, 1fr);\r\n    border: 0.1vmin solid currentColor;\r\n}\r\n\r\n.choose {\r\n    grid-area: g3;\r\n    display: grid;\r\n    grid-template-columns: repeat(4, 1fr);\r\n    grid-template-rows: repeat(4, 1fr);\r\n    grid-gap: 1vmin;\r\n    grid-template-areas:\r\n        \"cin cin cin cin\"\r\n        \". cp cp .\"\r\n        \". cp cp .\"\r\n        \"btn1 btn1 btn2 btn2\";\r\n}\r\n\r\n.scoreboard {\r\n    grid-area: g9;\r\n}\r\n\r\n.player {\r\n    display: grid;\r\n    grid-gap: 0.5vmin;\r\n}\r\n\r\n.player1 {\r\n    grid-area: g2;\r\n    grid-template-columns: repeat(7, 7vmin);\r\n    grid-template-rows: repeat(3, 7vmin);\r\n}\r\n\r\n.player2 {\r\n    grid-area: g4;\r\n    grid-template-columns: repeat(3, 7vmin);\r\n    grid-template-rows: repeat(7, 7vmin);\r\n}\r\n\r\n.player3 {\r\n    grid-area: g8;\r\n    grid-template-columns: repeat(7, 7vmin);\r\n    grid-template-rows: repeat(3, 7vmin);\r\n}\r\n\r\n.player4 {\r\n    grid-area: g6;\r\n    grid-template-columns: repeat(3, 7vmin);\r\n    grid-template-rows: repeat(7, 7vmin);\r\n}\r\n\r\n.piece {\r\n    display: grid;\r\n    grid-template-columns: repeat(5, 1fr);\r\n    grid-template-rows: repeat(5, 1fr);\r\n    border: 0.1vmin solid currentColor;\r\n}\r\n\r\n.cel {\r\n    place-content: center;\r\n    border: 0.1vmin solid currentColor;\r\n    /*background-color: #aaaaaa;*/\r\n}\r\n\r\n.cel.-hidden {\r\n    display: none;\r\n}\r\n\r\n.red {\r\n    background-color: #FF0000;\r\n}\r\n\r\n.yellow {\r\n    background-color: #FFaa00;\r\n}\r\n\r\n.blue {\r\n    background-color: #009999;\r\n}\r\n\r\n.green {\r\n    background-color: #00cc00;\r\n}\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Blokus.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"blokus\"},[_c('div',{staticClass:\"square\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"board\"},[_vm._l((_vm.board.boardMatrix.valueOf()),function(row,y){return [_vm._l((row),function(col,x){return _c('div',{key:y*20+x,staticClass:\"cel\",class:_vm.colClass[col]})}),_vm._v(\" \"),_c('div',{key:y+'n',staticClass:\"cel -hidden\"},[_vm._v(\"\\\\n\")])]})],2),_vm._v(\" \"),(_vm.selectedPiece)?_c('div',{staticClass:\"board\"},[_vm._l((_vm.board.previewMatrix.valueOf()),function(row,y){return [_vm._l((row),function(col,x){return _c('div',{key:y*20+x,staticClass:\"cel\",class:_vm.colClass[col],on:{\"mouseover\":function($event){return _vm.testMsg(_vm.selectedPiece.userId,x,y)},\"click\":function($event){return _vm.moveMsg(_vm.selectedPiece.userId)}}})}),_vm._v(\" \"),_c('div',{key:y+'n',staticClass:\"cel -hidden\"},[_vm._v(\"\\\\n\")])]})],2):_vm._e(),_vm._v(\" \"),_vm._l((_vm.players),function(player,index){return _c('div',{key:index,staticClass:\"player\",class:'player'+index},_vm._l((player.pieces),function(piece,index){return _c('div',{key:index,staticClass:\"piece\",on:{\"click\":function($event){return _vm.selectPieceMsg(player.userId,index)}}},[_vm._l((piece.matrixData.valueOf()),function(row,y){return [_vm._l((row),function(col,x){return _c('div',{key:y*5+x,staticClass:\"cel\",class:_vm.colClass[col]})}),_vm._v(\" \"),_c('div',{key:y+'n',staticClass:\"cel -hidden\"},[_vm._v(\"\\\\n\")])]})],2)}),0)}),_vm._v(\" \"),_c('div',{staticClass:\"choose\"},[_vm._m(1),_vm._v(\" \"),(_vm.selectedPiece)?_c('div',{staticClass:\"piece\",staticStyle:{\"grid-area\":\"cp\"}},[_vm._l((_vm.selectedPiece.matrixData.valueOf()),function(row,y){return [_vm._l((row),function(col,x){return _c('div',{key:y*5+x,staticClass:\"cel\",class:_vm.colClass[col]})}),_vm._v(\" \"),_c('div',{key:y+'n',staticClass:\"cel -hidden\"},[_vm._v(\"\\\\n\")])]})],2):_vm._e(),_vm._v(\" \"),_c('button',{staticStyle:{\"grid-area\":\"btn1\"},on:{\"click\":function($event){return _vm.rotateMsg(_vm.selectedPiece.userId)}}},[_vm._v(\"旋转 rotate\")]),_vm._v(\" \"),_c('button',{staticStyle:{\"grid-area\":\"btn2\"},on:{\"click\":function($event){return _vm.mirrorMsg(_vm.selectedPiece.userId)}}},[_vm._v(\"翻转 mirror\")])]),_vm._v(\" \"),_c('div',{staticClass:\"scoreboard\"},[_c('p',[_vm._v(\"记分板 scoreboard\")]),_vm._v(\" \"),_vm._l((_vm.players),function(player,index){return _c('p',{key:index,staticClass:\"player\",class:_vm.colClass[index]},[_vm._v(\"\\n        \"+_vm._s(\"player\"+player.userId +\": \" + player.score)+\"\\n      \")])}),_vm._v(\" \"),(_vm.text)?_c('p',[_vm._v(\"提示:\"+_vm._s(_vm.text))]):_vm._e()],2),_vm._v(\" \"),_c('div',{staticClass:\"room\"},[(_vm.room)?[_c('p',[_vm._v(\"当前房间号: \"+_vm._s(_vm.room.id))]),_vm._v(\" \"),_c('button',{on:{\"click\":_vm.leaveRoom}},[_vm._v(\"退出房间\")])]:[_c('button',{on:{\"click\":_vm.getAvailableRooms}},[_vm._v(\"刷新房间列表\")]),_vm._v(\" \"),_c('button',{on:{\"click\":_vm.createRoom}},[_vm._v(\"创建房间\")]),_vm._v(\" \"),_c('ul',_vm._l((_vm.rooms),function(room,index){return _c('li',{key:index},[_vm._v(\"\\n            \"+_vm._s(room.roomId+' '+room.clients+'/'+room.maxClients)+\"\\n            \"),_c('button',{on:{\"click\":function($event){return _vm.joinByLastId(room.roomId)}}},[_vm._v(\"加入\")])])}),0)]],2)],2)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"info\"},[_c('div',{staticClass:\"cn\"},[_c('p',[_vm._v(\"游戏流程\")]),_vm._v(\" \"),_c('p',[_vm._v(\"1、四位玩家各选择一种颜色的棋子，按照逆时针顺序轮流下棋。顺序为蓝、黄、红、绿，分别从左上、左下、右下、右上开局。\")]),_vm._v(\" \"),_c('p',[_vm._v(\"2、每位玩家第一步下棋，都必须覆盖住棋盘角落的起始点。\")]),_vm._v(\" \"),_c('p',[_vm._v(\"3、之后每一步新摆放的棋子，它的一个角必须与原有的同颜色的棋子的一个角接上。注意只能角对角，不能有边与边的接触。和其他颜色的棋子则没有限制。\")]),_vm._v(\" \"),_c('p',[_vm._v(\"4、一旦某玩家无法将自己的棋子按照规则放在棋盘上，则当轮该玩家宣布弃权，由下一个玩家继续。\")]),_vm._v(\" \"),_c('p',[_vm._v(\"当所有玩家都无法下棋时，则该局游戏结束。\")])]),_vm._v(\" \"),_c('div',{staticClass:\"en\"},[_c('p',[_vm._v(\"How to Play:\")]),_vm._v(\" \"),_c('p',[_vm._v(\"1. Each player chooses a color and places that set of 21 pieces in front of his/her side of the board. The order of play is as follows: blue, yellow, red, and then green.\")]),_vm._v(\" \"),_c('p',[_vm._v(\"2. The first player (blue) places any of his/her pieces in a corner square. Play proceeds clockwise around the board (yellow, red, and green), each player putting their first piece down in one of the corner squares.\")]),_vm._v(\" \"),_c('p',[_vm._v(\"3. Play continues as each player lays down one piece during a turn.\\n          Each new piece must touch at least one other piece of the same color, but only at the corners.\\n          No flat edges of same color pieces can touch.\\n          There are no restrictions on how pieces of different colors can touch one another.\")]),_vm._v(\" \"),_c('p',[_vm._v(\"4. Whenever a player is unable to place one of his/her remaining pieces on the board, that player must pass his/her turn.\")]),_vm._v(\" \"),_c('p',[_vm._v(\"End of Game:\\n          The game ends when all players are blocked from laying down any more of their pieces. This also includes any players who may have placed all of their pieces on the board. Scores are tallied, and the player with the highest score is the winner.\")]),_vm._v(\" \"),_c('p',[_vm._v(\"Scoring:\\n          Each player counts the number of unit squares in his/her remaining pieces (1 unit square = -1 point).\\n          A player earns +15 points if all his/her pieces have been placed on the board plus 5 additional bonus points if the last piece placed on the board was the smallest piece (one square).\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"grid-area\":\"cin\"}},[_c('p',[_vm._v(\"当前选中 choosed\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-52f11367\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Blokus.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-52f11367\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Blokus.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Blokus.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Blokus.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-52f11367\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Blokus.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-52f11367\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Blokus.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div>\r\n    <ul>\r\n        <li v-for =\"room,index in rooms\" :key=\"index\">\r\n            {{room.roomId}}\r\n            <button @click=\"joinByLastId(room.roomId)\">加入</button>\r\n        </li>\r\n    </ul>\r\n    {{rooms}}\r\n    <!-- 创建房间 -->\r\n    <!-- 房间列表 -->\r\n  </div>\r\n</template>\r\n<script>\r\nimport * as Colyseus from 'colyseus.js'\r\nexport default {\r\n    name: 'room',\r\n    data() {\r\n        return {\r\n            rooms: [],\r\n            roomKey: '',\r\n            client: null,\r\n            room: null,\r\n        }\r\n    },\r\n    mounted() {\r\n        console.log(\"mounted\")\r\n        this.client = new Colyseus.Client('ws://localhost:2567')\r\n        console.log(this.client)\r\n        this.leave()\r\n        this.create()\r\n        this.getAvailableRooms()\r\n    },\r\n    methods: {\r\n        addListeners(room) {\r\n            room.onJoin.add(function() {\r\n                console.log(room.id);\r\n                console.log('joined!');\r\n            })\r\n            room.onLeave.add(function() {\r\n                console.log(\"LEFT ROOM\", arguments);\r\n            })\r\n            room.onStateChange.add(function(data) {\r\n                console.log(\"chat update: \", data)\r\n            })\r\n        },\r\n        leave(){\r\n            this.room && this.room.leave()\r\n        },\r\n        join() {\r\n            this.room = this.clent.join('blokus-room')\r\n            this.addListeners(this.room)\r\n        },\r\n        create() {\r\n            this.room = this.client.join('blokus-room', { create: true })\r\n            this.addListeners(this.room)\r\n        },\r\n        joinByLastId(roomId) {\r\n            this.room = this.client.join(roomId)\r\n            this.addListeners(this.room)\r\n            this.getAvailableRooms()\r\n        },\r\n        getAvailableRooms() {\r\n            this.client.getAvailableRooms('blokus-room', (rooms, err) =>{\r\n                console.log(rooms)\r\n                this.rooms = rooms\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/room.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('ul',_vm._l((_vm.rooms),function(room,index){return _c('li',{key:index},[_vm._v(\"\\n          \"+_vm._s(room.roomId)+\"\\n          \"),_c('button',{on:{\"click\":function($event){return _vm.joinByLastId(room.roomId)}}},[_vm._v(\"加入\")])])}),0),_vm._v(\"\\n  \"+_vm._s(_vm.rooms)+\"\\n  \")])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-58a7f5a8\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/room.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./room.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./room.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-58a7f5a8\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./room.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/room.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\r\nimport Router from 'vue-router'\r\nimport Blokus from '@/components/Blokus'\r\nimport room from '@/components/room'\r\n\r\nVue.use(Router)\r\n\r\nexport default new Router({\r\n    routes: [{\r\n        path: '/',\r\n        name: 'Blokus',\r\n        component: Blokus\r\n    },{\r\n        path: '/room',\r\n        name: 'room',\r\n        component: room\r\n    }]\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","// The Vue build version to load with the `import` command\r\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\r\nimport Vue from 'vue'\r\nimport App from './App'\r\nimport router from './router'\r\n\r\nVue.config.productionTip = false\r\n\r\n/* eslint-disable no-new */\r\nnew Vue({\r\n    el: '#app',\r\n    router,\r\n    components: {\r\n        App\r\n    },\r\n    template: '<App/>'\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}