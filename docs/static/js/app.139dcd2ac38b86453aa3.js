webpackJsonp([1],{FMv6:function(t,e){},GazV:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("7+uW"),s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var r=i("VU/8")({name:"App"},s,!1,function(t){i("GazV")},null,null).exports,a=i("/ocq"),o=i("G8fO"),c=i.n(o),l=i("d7EF"),u=i.n(l),d=i("BO1k"),h=i.n(d),v=i("Zrlr"),y=i.n(v),f=i("wxAW"),p=i.n(f),x=function(){function t(){y()(this,t),this.boardMatrix=c.a.zeros(20,20),this.previewMatrix=c.a.zeros(20,20),this.tryX=0,this.tryY=0,this.tryPiece=null}return p()(t,[{key:"initTry",value:function(){this.tryX=0,this.tryY=0,this.tryPiece=null}},{key:"tryMove",value:function(t,e,i,n){console.log(t,e,i,n);var s=c.a.zeros(20,20),r=new m(t-2,e-2),a=i.translate(r);console.log(a);var o=!0,l=!1,u=void 0;try{for(var d,v=h()(a);!(o=(d=v.next()).done);o=!0){var y=d.value;if(!(y.x<20&&y.x>=0&&y.y<20&&y.y>=0))return;s.set([y.y,y.x],n)}}catch(t){l=!0,u=t}finally{try{!o&&v.return&&v.return()}finally{if(l)throw u}}this.tryX=t-2,this.tryY=e-2,this.tryPiece=i,this.previewMatrix=s}},{key:"move",value:function(t){if(this.tryPiece){var e=new m(this.tryX,this.tryY),i=this.tryPiece.translate(e),n=!0,s=!1,r=void 0;try{for(var a,o=h()(i);!(n=(a=o.next()).done);n=!0){var c=a.value;this.boardMatrix.set([c.y,c.x],t)}}catch(t){s=!0,r=t}finally{try{!n&&o.return&&o.return()}finally{if(s)throw r}}return this.initTry(),!0}}}]),t}(),_=function(){function t(e,i){y()(this,t),this.userId=i,this.matrixData=c.a.multiply(c.a.matrix(e),i),this.pieceData=e,this.pointsData=e.reduce(function(t,e,i){var n=e.reduce(function(t,e,n){return 1===e&&t.push(new m(n,i)),t},[]);return t.concat(n)},[]),this.translation=new m(0,0),this.scale=1}return p()(t,[{key:"translate",value:function(t){return this.pointsData.map(function(e){console.log(e);var i=e.x,n=e.y,s=c.a.multiply([[1,0,t.x],[0,1,t.y],[0,0,1]],[[i],[n],[1]]),r=u()(s,3),a=u()(r[0],1)[0],o=u()(r[1],1)[0];u()(r[2],1)[0];return new m(a,o)})}},{key:"setTranslation",value:function(t,e){this.translation=new m(t,e)}},{key:"rotate",value:function(){var t=this,e=c.a.pi/2,i=this.matrixData.size(),n=c.a.zeros(i[0],i[1]),s=c.a.cos(e).toFixed(),r=c.a.sin(e).toFixed(),a=this.pointsData.map(function(e){console.log(e);var i=c.a.multiply([[s,-r,2*(1-s)+2*r],[r,s,2*(1-s)-2*r],[0,0,1]],[[e.x],[e.y],[1]]),a=u()(i,3),o=u()(a[0],1)[0],l=u()(a[1],1)[0];u()(a[2],1)[0];return console.log(o,l,t.userId),n.set([l,o],t.userId),new m(o,l)});this.pointsData=a,this.matrixData=n}},{key:"mirror",value:function(){var t=this,e=this.matrixData.size(),i=c.a.zeros(e[0],e[1]),n=[];this.pointsData.forEach(function(s){var r=e[0]-1-s.x,a=s.y;i.set([a,r],t.userId),n.push(new m(r,a))}),this.pointsData=n,this.matrixData=i}}]),t}(),m=function t(e,i){y()(this,t),this.x=e,this.y=i},b={Board:x,Player:function(){function t(e,i){y()(this,t),this.userId=e,this.board=i,this.initPieces(e)}return p()(t,[{key:"initPieces",value:function(t){var e=this;this.pieces=[],P.forEach(function(i){e.pieces.push(new _(i,t))})}},{key:"tryMove",value:function(t,e,i,n){this.tryIndex=n,this.board.tryMove(t,e,i,this.userId)}},{key:"move",value:function(){console.log("move",this.userId,this.tryIndex),this.board.move(this.userId)&&this.pieces.splice(this.tryIndex,1)}}]),t}()},P=[[[0,0,0,0,0],[0,0,0,0,0],[0,0,1,0,0],[0,0,0,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,0,0,0],[0,1,1,0,0],[0,0,0,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,0,0,0],[0,1,1,1,0],[0,0,0,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,1,0,0],[0,0,1,1,0],[0,0,0,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,0,0,0],[1,1,1,1,0],[0,0,0,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,1,0,0,0],[0,1,1,1,0],[0,0,0,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,1,0,0],[0,1,1,1,0],[0,0,0,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,1,1,0],[0,1,1,0,0],[0,0,0,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,1,1,0,0],[0,1,1,0,0],[0,0,0,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,0,0,0],[1,1,1,1,1],[0,0,0,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,1,0,0,0],[0,1,1,1,1],[0,0,0,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,1,0,0],[0,1,1,1,1],[0,0,0,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,0,0,0],[0,0,1,1,1],[0,1,1,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,1,1,0,0],[0,1,1,1,0],[0,0,0,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,1,0,1,0],[0,1,1,1,0],[0,0,0,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,1,0,0],[0,1,1,1,0],[0,1,0,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,1,1,0],[0,0,1,0,0],[0,1,1,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,1,0,0,0],[0,1,0,0,0],[0,1,1,1,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,1,1,1,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,1,0,0],[0,1,1,1,0],[0,0,1,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,1,0,0,0],[0,1,1,0,0],[0,0,1,1,0],[0,0,0,0,0]]],w={name:"Blokus",data:function(){return{board:new b.Board,players:{},selectedPiece:null,colClass:["","red","orange","blue","green"]}},mounted:function(){this.players={1:new b.Player(1,this.board),2:new b.Player(2,this.board),3:new b.Player(3,this.board),4:new b.Player(4,this.board)}},methods:{test:function(t,e){var i=this.selectedPiece.userId;console.log(i),this.players[i].tryMove(t,e,this.selectedPiece,this.selectedIndex)},move:function(){var t=this.selectedPiece.userId;this.players[t].move(),this.selectedPiece=null},selectPiece:function(t,e){this.selectedPiece=t,this.selectedIndex=e,this.board.initTry(),console.log(this.selectedPiece)},rotate:function(){this.selectedPiece&&this.selectedPiece.rotate()},mirror:function(){this.selectedPiece&&this.selectedPiece.mirror()}}},k={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"blokus"},[i("div",{staticStyle:{height:"400px"}},[i("div",{staticClass:"board",staticStyle:{"z-index":"0",position:"absolute"}},[t._l(t.board.boardMatrix.valueOf(),function(e,n){return[t._l(e,function(e,s){return i("div",{key:20*n+s,staticClass:"board_one",class:t.colClass[e]})}),t._v(" "),i("div",{staticClass:"board_one -hidden"},[t._v("\\n")])]})],2),t._v(" "),t.selectedPiece?i("div",{staticClass:"board",staticStyle:{"z-index":"1",position:"absolute"}},[t._l(t.board.previewMatrix.valueOf(),function(e,n){return[t._l(e,function(e,s){return i("div",{key:20*n+s,staticClass:"board_one",class:t.colClass[e],on:{mouseover:function(e){return t.test(s,n)},click:function(e){return t.move()}}})}),t._v(" "),i("div",{staticClass:"board_one -hidden"},[t._v("\\n")])]})],2):t._e(),t._v(" "),t.selectedPiece?i("table",{staticStyle:{position:"absolute",left:"450px"}},t._l(t.selectedPiece.matrixData.valueOf(),function(e,n){return i("tr",{key:n,staticClass:"piece row"},t._l(e,function(e,n){return i("td",{staticClass:"piece col",class:t.colClass[e]})}),0)}),0):t._e()]),t._v(" "),i("hr"),t._v(" "),i("button",{on:{click:t.rotate}},[t._v("旋转选中")]),t._v(" "),i("button",{on:{click:t.mirror}},[t._v("翻转选中")]),t._v(" "),t._l(t.players,function(e,n){return i("div",{key:n},[i("p",[t._v("player"+t._s(n))]),t._v(" "),i("div",{staticStyle:{display:"flex","flex-wrap":"wrap"}},t._l(e.pieces,function(e,n){return i("div",{key:n,staticStyle:{margin:"20px"},on:{click:function(i){return t.selectPiece(e,n)}}},[i("table",t._l(e.matrixData.valueOf(),function(e,n){return i("tr",{key:n,staticClass:"piece row"},t._l(e,function(e,n){return i("td",{staticClass:"piece col",class:t.colClass[e]})}),0)}),0)])}),0),t._v(" "),i("hr")])})],2)},staticRenderFns:[]};var C=i("VU/8")(w,k,!1,function(t){i("FMv6")},"data-v-52bfd216",null).exports;n.a.use(a.a);var I=new a.a({routes:[{path:"/",name:"Blokus",component:C}]});n.a.config.productionTip=!1,new n.a({el:"#app",router:I,components:{App:r},template:"<App/>"})}},["NHnr"]);
//# sourceMappingURL=app.139dcd2ac38b86453aa3.js.map